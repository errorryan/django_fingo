{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Orders</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* üåä GLOBAL BASE STYLE (same as login/profile) */
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #001f3f;
      color: #fff;
      height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* üåä Ocean Waves */
    .ocean {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 200%;
      height: 25%;
      background: #e16e1b;
      z-index: -2;
    }

    .wave {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 200%;
      height: 100%;
      background: url('https://i.imgur.com/4NJl5bM.png') repeat-x;
      background-size: 50% 100%;
      animation: waveMove 10s linear infinite;
      opacity: 0.6;
    }

    @keyframes waveMove {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* üåü PAGE WRAPPER */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 50px 20px;
      position: relative;
      z-index: 1;
    }

    h1 {
      text-align: center;
      font-size: 2.2rem;
      color: #00b4d8;
      text-shadow: 0 0 10px rgba(0, 180, 216, 0.8);
      margin-bottom: 40px;
    }

    /* üí≥ ORDER CARD */
    .order-card {
      background: rgba(20, 20, 20, 0.9);
      border: 1px solid #e7630b;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 0 15px rgba(243, 72, 10, 0.7);
      transition: 0.3s;
    }

    .order-card:hover {
      box-shadow: 0 0 25px rgba(0, 180, 216, 0.8);
      transform: scale(1.02);
    }

    .order-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #00b4d8;
    }

    .order-price {
      color: #fca311;
      font-size: 1.1rem;
    }

    .order-status {
      color: #90e0ef;
      font-size: 0.95rem;
    }

    .order-date {
      font-size: 0.85rem;
      color: #ccc;
    }

    /* üß≠ BUTTONS */
    .actions {
      text-align: center;
      margin-top: 30px;
    }

    .btn {
      display: inline-block;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: 0.3s;
    }

    .btn-home {
      background-color: #0077b6;
      color: #fff;
    }

    .btn-home:hover {
      background-color: #0096c7;
      box-shadow: 0 0 15px rgba(0, 150, 199, 0.8);
    }

    .btn-shop {
      background-color: #00b4d8;
      color: #fff;
    }

    .btn-shop:hover {
      background-color: #90e0ef;
      color: #001f3f;
      box-shadow: 0 0 15px rgba(0, 180, 216, 0.8);
    }

    /* üì± RESPONSIVE */
    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 1.6rem;
      }

      .order-card {
        padding: 15px;
      }
    }
  </style>
</head>

  <!-- üåä Ocean Background -->
  <div class="ocean">
    <div class="wave"></div>
  </div>
<body>
  <!-- üí≥ Orders Container -->
  <div class="container">
    <h1>My Orders</h1>

    {% if orders %}
      {% for order in orders %}
        <div class="order-card">
           <p>
                {% if order.product.image %}
                    <img src="{{ order.product.image.url }}" alt="{{ order.product.productName }}" width="150">
                {% else %}
                    <img src="https://via.placeholder.com/150" alt="No Image">
                {% endif %}
            </p>
          <p><strong>{{ order.product.productName }}</strong></p>
          <p>Price per kg: ‚Ç±{{ order.product.price }}</p>
          <p>Kilo: {{ order.quantity }} kg</p>
          <p>Total: ‚Ç±{{ order.total_price }}</p>
          <p>Status: {{ order.status }}</p>
          <p>Ordered on {{ order.created_at|date:"M d, Y H:i" }}</p>

          {% if order.status != "Completed" and order.status != "Cancelled" %}
            <a href="{% url 'cancel_order' order.id %}" class="btn btn-danger">
              Cancel Order
            </a>
          {% endif %}
        </div>
      {% endfor %}

      <!-- Total Summary -->
      <div style="text-align:right; margin-top:20px; font-weight:bold;">
        <p>Total Kilos: {{ total_kilos }} kg</p>
        <p>Total Price: ‚Ç±{{ total_price }}</p>
      </div>

    {% else %}
      <p style="text-align:center; color:#ccc;">You have no orders yet.</p>
    {% endif %}

    <div class="actions" style="margin-top:20px;">
      <a href="{% url 'my_completed_orders' %}" class="btn btn-order">View Completed Orders ‚úÖ</a>
      <a href="{% url 'user_dashboard' %}" class="btn btn-home">üè† Back to Home</a>
      <a href="{% url 'view_products' %}" class="btn btn-shop">üõí Shop</a>
    </div>
  </div>
</body>

</html>
